(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-247d5b7c"],{"00d87":function(e,t){(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&o.rotl(e,8)|4278255360&o.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=o.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],o=0,r=0;o<e.length;o++,r+=8)t[r>>>5]|=e[o]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],o=0;o<32*e.length;o+=8)t.push(e[o>>>5]>>>24-o%32&255);return t},bytesToHex:function(e){for(var t=[],o=0;o<e.length;o++)t.push((e[o]>>>4).toString(16)),t.push((15&e[o]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],o=0;o<e.length;o+=2)t.push(parseInt(e.substr(o,2),16));return t},bytesToBase64:function(e){for(var o=[],r=0;r<e.length;r+=3)for(var a=e[r]<<16|e[r+1]<<8|e[r+2],n=0;n<4;n++)8*r+6*n<=8*e.length?o.push(t.charAt(a>>>6*(3-n)&63)):o.push("=");return o.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var o=[],r=0,a=0;r<e.length;a=++r%4)0!=a&&o.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*a+8)-1)<<2*a|t.indexOf(e.charAt(r))>>>6-2*a);return o}};e.exports=o})()},"53c2":function(e,t,o){"use strict";var r=o("f2f5"),a=o.n(r);a.a},"6821f":function(e,t,o){(function(){var t=o("00d87"),r=o("9a63").utf8,a=o("044b"),n=o("9a63").bin,i=function(e,o){e.constructor==String?e=o&&"binary"===o.encoding?n.stringToBytes(e):r.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var s=t.bytesToWords(e),l=8*e.length,c=1732584193,p=-271733879,d=-1732584194,u=271733878,m=0;m<s.length;m++)s[m]=16711935&(s[m]<<8|s[m]>>>24)|4278255360&(s[m]<<24|s[m]>>>8);s[l>>>5]|=128<<l%32,s[14+(l+64>>>9<<4)]=l;var h=i._ff,f=i._gg,v=i._hh,_=i._ii;for(m=0;m<s.length;m+=16){var g=c,b=p,F=d,y=u;c=h(c,p,d,u,s[m+0],7,-680876936),u=h(u,c,p,d,s[m+1],12,-389564586),d=h(d,u,c,p,s[m+2],17,606105819),p=h(p,d,u,c,s[m+3],22,-1044525330),c=h(c,p,d,u,s[m+4],7,-176418897),u=h(u,c,p,d,s[m+5],12,1200080426),d=h(d,u,c,p,s[m+6],17,-1473231341),p=h(p,d,u,c,s[m+7],22,-45705983),c=h(c,p,d,u,s[m+8],7,1770035416),u=h(u,c,p,d,s[m+9],12,-1958414417),d=h(d,u,c,p,s[m+10],17,-42063),p=h(p,d,u,c,s[m+11],22,-1990404162),c=h(c,p,d,u,s[m+12],7,1804603682),u=h(u,c,p,d,s[m+13],12,-40341101),d=h(d,u,c,p,s[m+14],17,-1502002290),p=h(p,d,u,c,s[m+15],22,1236535329),c=f(c,p,d,u,s[m+1],5,-165796510),u=f(u,c,p,d,s[m+6],9,-1069501632),d=f(d,u,c,p,s[m+11],14,643717713),p=f(p,d,u,c,s[m+0],20,-373897302),c=f(c,p,d,u,s[m+5],5,-701558691),u=f(u,c,p,d,s[m+10],9,38016083),d=f(d,u,c,p,s[m+15],14,-660478335),p=f(p,d,u,c,s[m+4],20,-405537848),c=f(c,p,d,u,s[m+9],5,568446438),u=f(u,c,p,d,s[m+14],9,-1019803690),d=f(d,u,c,p,s[m+3],14,-187363961),p=f(p,d,u,c,s[m+8],20,1163531501),c=f(c,p,d,u,s[m+13],5,-1444681467),u=f(u,c,p,d,s[m+2],9,-51403784),d=f(d,u,c,p,s[m+7],14,1735328473),p=f(p,d,u,c,s[m+12],20,-1926607734),c=v(c,p,d,u,s[m+5],4,-378558),u=v(u,c,p,d,s[m+8],11,-2022574463),d=v(d,u,c,p,s[m+11],16,1839030562),p=v(p,d,u,c,s[m+14],23,-35309556),c=v(c,p,d,u,s[m+1],4,-1530992060),u=v(u,c,p,d,s[m+4],11,1272893353),d=v(d,u,c,p,s[m+7],16,-155497632),p=v(p,d,u,c,s[m+10],23,-1094730640),c=v(c,p,d,u,s[m+13],4,681279174),u=v(u,c,p,d,s[m+0],11,-358537222),d=v(d,u,c,p,s[m+3],16,-722521979),p=v(p,d,u,c,s[m+6],23,76029189),c=v(c,p,d,u,s[m+9],4,-640364487),u=v(u,c,p,d,s[m+12],11,-421815835),d=v(d,u,c,p,s[m+15],16,530742520),p=v(p,d,u,c,s[m+2],23,-995338651),c=_(c,p,d,u,s[m+0],6,-198630844),u=_(u,c,p,d,s[m+7],10,1126891415),d=_(d,u,c,p,s[m+14],15,-1416354905),p=_(p,d,u,c,s[m+5],21,-57434055),c=_(c,p,d,u,s[m+12],6,1700485571),u=_(u,c,p,d,s[m+3],10,-1894986606),d=_(d,u,c,p,s[m+10],15,-1051523),p=_(p,d,u,c,s[m+1],21,-2054922799),c=_(c,p,d,u,s[m+8],6,1873313359),u=_(u,c,p,d,s[m+15],10,-30611744),d=_(d,u,c,p,s[m+6],15,-1560198380),p=_(p,d,u,c,s[m+13],21,1309151649),c=_(c,p,d,u,s[m+4],6,-145523070),u=_(u,c,p,d,s[m+11],10,-1120210379),d=_(d,u,c,p,s[m+2],15,718787259),p=_(p,d,u,c,s[m+9],21,-343485551),c=c+g>>>0,p=p+b>>>0,d=d+F>>>0,u=u+y>>>0}return t.endian([c,p,d,u])};i._ff=function(e,t,o,r,a,n,i){var s=e+(t&o|~t&r)+(a>>>0)+i;return(s<<n|s>>>32-n)+t},i._gg=function(e,t,o,r,a,n,i){var s=e+(t&r|o&~r)+(a>>>0)+i;return(s<<n|s>>>32-n)+t},i._hh=function(e,t,o,r,a,n,i){var s=e+(t^o^r)+(a>>>0)+i;return(s<<n|s>>>32-n)+t},i._ii=function(e,t,o,r,a,n,i){var s=e+(o^(t|~r))+(a>>>0)+i;return(s<<n|s>>>32-n)+t},i._blocksize=16,i._digestsize=16,e.exports=function(e,o){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var r=t.wordsToBytes(i(e,o));return o&&o.asBytes?r:o&&o.asString?n.bytesToString(r):t.bytesToHex(r)}})()},"787c":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Row",[o("Alert",{attrs:{type:"info","show-icon":""}},[e._v("发布配置，用于代码发布。")]),o("Col",{attrs:{span:"24"}},[o("Card",[o("p",{attrs:{slot:"title"},slot:"title"},[o("span",{staticStyle:{"font-size":"14px",color:"#909399"}},[e._v("发布配置")]),o("a",{staticStyle:{float:"right","font-weight":"normal","font-size":"12px"},on:{click:e.refreshChoseData}},[e._v("刷新")])]),o("Tabs",{attrs:{value:"ALL",type:"card",size:"small",animated:!1},on:{"on-click":e.choseTab}},[e._l(e.tabs,function(t){return o("TabPane",{key:t.id,attrs:{name:t.env,label:t.env}},[o("div",{staticStyle:{"margin-top":"20px"}},[o("Row",{attrs:{gutter:10}},[o("Col",{attrs:{span:"10"}},[o("Poptip",{staticStyle:{"margin-right":"10px"},attrs:{confirm:"",title:"确认删除吗 ?",placement:"right-start"},on:{"on-ok":e.deleteData}},[o("Button",{attrs:{size:"small"}},[e._v("删除")])],1),o("Tooltip",{attrs:{placement:"bottom-start",content:"复制配置后，请记住修改环境对应的IP"}},["ALL"!==e.currentTab?o("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"error",ghost:"",size:"small"},on:{click:e.handleCopyFormShow}},[e._v("批量复制配置")]):e._e()],1),o("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",ghost:"",size:"small"},on:{click:e.handleCreateModal}},[e._v("创建发布配置")])],1),o("Col",{attrs:{span:"10",offset:"4"}},[o("Dropdown",{attrs:{trigger:"click"},on:{"on-click":e.handleServerMode}},[o("Button",{attrs:{type:"primary",size:"small",ghost:""}},[e._v("\n                      Server Mode\n                      "),o("Icon",{attrs:{type:"ios-arrow-down"}})],1),o("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.configFormSelect.server_mode,function(t){return o("DropdownItem",{key:t,attrs:{name:t}},[e._v(e._s(t))])}))],1),o("Button",{staticStyle:{"margin-left":"10px","margin-right":"10px"},attrs:{type:"default",size:"small"},on:{click:function(){e.changeIpModal=!0,e.getOldIps()}}},[e._v("批量更换发布IP")]),o("Input",{staticStyle:{width:"54%"},attrs:{placeholder:"应用名",search:""},on:{"on-enter":e.searchValue},model:{value:e.searchApp,callback:function(t){e.searchApp=t},expression:"searchApp"}})],1)],1)],1),o("Table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.tableColumn,loading:e.tableLoading,data:e.tableData},on:{"on-selection-change":function(t){e.tableSelectedIds=t.map(function(e){return e.id})}}})],1)}),o("Dropdown",{attrs:{slot:"extra",placement:"bottom-end"},on:{"on-click":e.hadnleDropDown},slot:"extra"},[o("a",{staticStyle:{"font-size":"13px"}},[e._v("\n              更多操作\n              "),o("Icon",{attrs:{type:"ios-arrow-down"}})],1),o("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[o("DropdownItem",{attrs:{name:"add_env"}},[e._v("增加 Env Tab")]),o("DropdownItem",{attrs:{name:"update_env"}},[e._v("更新 Env Tab")]),o("DropdownItem",{attrs:{name:"delete_env"}},[e._v("删除 Env Tab")])],1)],1)],2)],1)],1)],1),o("Modal",{attrs:{title:e.createModalTitle,"mask-closable":!1,styles:{top:"20px"},mask:!0},model:{value:e.createModal,callback:function(t){e.createModal=t},expression:"createModal"}},[o("Alert",{attrs:{"show-icon":""}},[o("b",{staticStyle:{color:"red","font-size":"20px"}},[e._v("*")]),e._v(" 号为必填项")]),o("Form",{ref:"configForm",attrs:{model:e.configForm,"label-width":120,rules:e.ruleConfigForm}},[o("Divider",{staticStyle:{color:"#909399","font-size":"13px"}},[e._v("基础配置")]),o("FormItem",{attrs:{label:"应用名:",prop:"app_name"}},[o("Select",{attrs:{filterable:""},on:{"on-change":e.handleAppNameChange},model:{value:e.configForm.app_name,callback:function(t){e.$set(e.configForm,"app_name",t)},expression:"configForm.app_name"}},e._l(e.appList,function(t){return o("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],1),o("FormItem",{attrs:{label:"(前/后) 端:",prop:"web_tag"}},[o("Select",{attrs:{filterable:""},on:{"on-change":function(t){e.currentWebTag=t}},model:{value:e.configForm.web_tag,callback:function(t){e.$set(e.configForm,"web_tag",t)},expression:"configForm.web_tag"}},e._l(e.configFormSelect.web_tag,function(t){return o("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],1),o("FormItem",{attrs:{label:"环境:",prop:"env"}},[o("Select",{attrs:{filterable:""},on:{"on-change":e.handleEnvChange},model:{value:e.configForm.env,callback:function(t){e.$set(e.configForm,"env",t)},expression:"configForm.env"}},e._l(e.dynamicTabs,function(t){return o("Option",{key:t.env,attrs:{value:t.env}},[e._v(e._s(t.env))])}))],1),o("FormItem",{attrs:{label:"发布IP:",prop:"publish_ip"}},[o("Select",{attrs:{multiple:""},model:{value:e.configForm.publish_ip,callback:function(t){e.$set(e.configForm,"publish_ip",t)},expression:"configForm.publish_ip"}},e._l(e.configFormSelect.appEnvIp,function(t){return o("Option",{key:t[0],attrs:{value:t[0]}},[e._v("\n            "+e._s(t[0])+"\n            "),o("span",{staticStyle:{float:"right",color:"#909399"}},[e._v(e._s(t[1]))])])}))],1),o("FormItem",{attrs:{label:"Server Mode:",prop:"server_mode"}},[o("Select",{model:{value:e.configForm.server_mode,callback:function(t){e.$set(e.configForm,"server_mode",t)},expression:"configForm.server_mode"}},e._l(e.configFormSelect.server_mode,function(t){return o("Option",{key:t,attrs:{value:t}},[e._v(e._s(t)+"\n            "),o("span",{staticStyle:{float:"right",color:"#909399"}},[e._v("(发布设置中定义)")])])}))],1),o("FormItem",{attrs:{label:"Jenkins Project:",prop:"jenkins_project"}},[o("Select",{model:{value:e.configForm.jenkins_project,callback:function(t){e.$set(e.configForm,"jenkins_project",t)},expression:"configForm.jenkins_project"}},e._l(e.configFormSelect.jenkins_project,function(t){return o("Option",{key:t,attrs:{value:t}},[e._v(e._s(t)+"\n            "),o("span",{staticStyle:{float:"right",color:"#909399"}},[e._v("(发布设置中定义)")])])}))],1),o("FormItem",{attrs:{label:"Git Url:",prop:"git_url"}},[o("Input",{attrs:{placeholder:""},model:{value:e.configForm.git_url,callback:function(t){e.$set(e.configForm,"git_url","string"===typeof t?t.trim():t)},expression:"configForm.git_url"}},[e._v(e._s(e.configForm.git_url))])],1),o("FormItem",{attrs:{label:"发布步骤:",prop:"steps_id"}},[o("Select",{model:{value:e.configForm.steps_id,callback:function(t){e.$set(e.configForm,"steps_id",t)},expression:"configForm.steps_id"}},e._l(e.configFormSelect.steps,function(t){return o("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name)+"\n            "),o("span",{staticStyle:{float:"right",color:"#909399"}},[e._v("模版")])])}))],1),o("div",{directives:[{name:"show",rawName:"v-show",value:"frontend"===e.currentWebTag,expression:"currentWebTag === 'frontend'"}]},[o("Divider",{staticStyle:{color:"#909399","font-size":"13px"}},[e._v("参数配置 (前端)")]),o("h1",{staticStyle:{"text-align":"center",color:"#909399"}},[e._v("None")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:"backend"===e.currentWebTag,expression:"currentWebTag === 'backend'"}]},[o("Divider",{staticStyle:{color:"#909399","font-size":"13px"}},[e._v("参数配置 (后端)")]),o("FormItem",{attrs:{label:"Package Name:",prop:"pkg_name"}},[o("Input",{attrs:{placeholder:""},model:{value:e.configForm.pkg_name,callback:function(t){e.$set(e.configForm,"pkg_name","string"===typeof t?t.trim():t)},expression:"configForm.pkg_name"}},[e._v(e._s(e.configForm.pkg_name))])],1),o("FormItem",{attrs:{label:"APP Port:",prop:"port"}},[o("InputNumber",{staticStyle:{width:"100%"},attrs:{min:0,max:65535,placeholder:""},model:{value:e.configForm.port,callback:function(t){e.$set(e.configForm,"port",t)},expression:"configForm.port"}},[e._v(e._s(e.configForm.port))])],1),o("FormItem",{attrs:{label:"Mvn Options:",prop:"mvn_opts_id"}},[o("Select",{model:{value:e.configForm.mvn_opts_id,callback:function(t){e.$set(e.configForm,"mvn_opts_id",t)},expression:"configForm.mvn_opts_id"}},e._l(e.configFormSelect.mvn_opts,function(t){return o("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name)+"\n                "),o("span",{staticStyle:{float:"right",color:"#909399"}},[e._v("模版")])])}))],1),o("FormItem",{attrs:{label:"Gradle Options:",prop:"gradle_opts_id"}},[o("Select",{model:{value:e.configForm.gradle_opts_id,callback:function(t){e.$set(e.configForm,"gradle_opts_id",t)},expression:"configForm.gradle_opts_id"}},e._l(e.configFormSelect.gradle_opts,function(t){return o("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name)+"\n                "),o("span",{staticStyle:{float:"right",color:"#909399"}},[e._v("模版")])])}))],1),o("FormItem",{attrs:{label:"Java Options:",prop:"java_opts_id"}},[o("Select",{model:{value:e.configForm.java_opts_id,callback:function(t){e.$set(e.configForm,"java_opts_id",t)},expression:"configForm.java_opts_id"}},e._l(e.configFormSelect.java_opts,function(t){return o("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name)+"\n                "),o("span",{staticStyle:{float:"right",color:"#909399"}},[e._v("模版")])])}))],1),o("FormItem",{attrs:{label:"Jar Options:",prop:"jar_opts_id"}},[o("Select",{model:{value:e.configForm.jar_opts_id,callback:function(t){e.$set(e.configForm,"jar_opts_id",t)},expression:"configForm.jar_opts_id"}},e._l(e.configFormSelect.jar_opts,function(t){return o("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name)+"\n                "),o("span",{staticStyle:{float:"right",color:"#909399"}},[e._v("模版")])])}))],1),o("FormItem",{attrs:{label:"Docker Options:",prop:"docker_opts_id"}},[o("Select",{model:{value:e.configForm.docker_opts_id,callback:function(t){e.$set(e.configForm,"docker_opts_id",t)},expression:"configForm.docker_opts_id"}},e._l(e.configFormSelect.docker_opts,function(t){return o("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name)+"\n                "),o("span",{staticStyle:{float:"right",color:"#909399"}},[e._v("模版")])])}))],1),o("FormItem",{attrs:{label:"Dockerfile:",prop:"dockerfile_id"}},[o("Select",{model:{value:e.configForm.dockerfile_id,callback:function(t){e.$set(e.configForm,"dockerfile_id",t)},expression:"configForm.dockerfile_id"}},e._l(e.configFormSelect.dockerfile,function(t){return o("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name)+"\n                "),o("span",{staticStyle:{float:"right",color:"#909399"}},[e._v("模版")])])}))],1)],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"default"},on:{click:function(t){e.handleReset("configForm")}}},[e._v("重置")]),o("Button",{attrs:{type:"primary",ghost:"",loading:e.commitLoading},on:{click:function(t){e.handlePublishConfig("configForm")}}},[e._v("提交")])],1)],1),o("Modal",{attrs:{title:e.envModalTitle,mask:!0},on:{"on-ok":function(t){e.handleEnv("envForm")}},model:{value:e.envModal,callback:function(t){e.envModal=t},expression:"envModal"}},[o("Alert",{attrs:{type:"warning","show-icon":""}},[e._v("环境名与应用名，不是强关系，即删除后也不会将整个已配置列表删除掉，只是不显示而已。")]),o("Form",{ref:"envForm",attrs:{model:e.envForm,"label-width":100,rules:e.ruleEnvForm,inline:""}},["update"===e.envCurrentMode?o("FormItem",{attrs:{label:"环境名(旧)",prop:"id"}},[o("Select",{staticStyle:{width:"300px"},model:{value:e.envForm.id,callback:function(t){e.$set(e.envForm,"id",t)},expression:"envForm.id"}},e._l(e.dynamicTabs,function(t){return o("Option",{key:t.env,attrs:{value:t.id}},[e._v(e._s(t.env))])}))],1):e._e(),o("FormItem",{attrs:{label:"环境名",prop:"env"}},[o("Input",{staticStyle:{width:"300px"},attrs:{autofocus:"",placeholder:"env"},model:{value:e.envForm.env,callback:function(t){e.$set(e.envForm,"env","string"===typeof t?t.trim():t)},expression:"envForm.env"}})],1)],1)],1),o("Modal",{attrs:{title:e.copyModalTitle,closable:!1,"mask-closable":!1},on:{"on-ok":function(t){e.handleCopyForm("copyForm")}},model:{value:e.copyModal,callback:function(t){e.copyModal=t},expression:"copyModal"}},[o("Alert",{attrs:{type:"warning","show-icon":""}},[e._v("若被复制的配置已存在于被选中的环境中，则会出现错误异常 (部分复制成功，部分失败的情况).")]),o("Form",{ref:"copyForm",attrs:{model:e.copyForm,"label-width":120,rules:e.ruleCopyForm,inline:""}},[o("FormItem",{attrs:{label:"复制配置到(环境):",prop:"envs"}},[o("Select",{staticStyle:{width:"300px"},attrs:{multiple:""},model:{value:e.copyForm.envs,callback:function(t){e.$set(e.copyForm,"envs",t)},expression:"copyForm.envs"}},e._l(e.dynamicTabs,function(t){return o("Option",{key:t.env,attrs:{value:t.env}},[e._v(e._s(t.env))])}))],1)],1)],1),o("Modal",{attrs:{title:"批量复制配置",closable:!1,"mask-closable":!1},on:{"on-ok":function(t){e.handleBatchCopyForm("batchCopyForm")}},model:{value:e.batchCopyModal,callback:function(t){e.batchCopyModal=t},expression:"batchCopyModal"}},[o("Alert",{attrs:{type:"warning","show-icon":""}},[e._v("若被复制的配置已存在于被选中的环境中，则会出现错误异常 (部分复制成功，部分失败的情况).")]),o("Form",{ref:"batchCopyForm",attrs:{model:e.batchCopyForm,"label-width":120,rules:e.ruleBatchCopyForm,inline:""}},[o("FormItem",{attrs:{label:"复制配置到(环境):",prop:"env"}},[o("Select",{staticStyle:{width:"300px"},model:{value:e.batchCopyForm.env,callback:function(t){e.$set(e.batchCopyForm,"env",t)},expression:"batchCopyForm.env"}},e._l(e.dynamicTabs,function(t){return o("Option",{key:t.env,attrs:{value:t.env}},[e._v(e._s(t.env))])}))],1),o("FormItem",{attrs:{label:"已选择的应用:"}},e._l(e.batchCopyAppShowList,function(t){return o("p",{key:t},[e._v(e._s(t))])}))],1)],1),o("Modal",{attrs:{title:e.checkModalTitle,width:800},on:{"on-ok":e.handleCheckModal},model:{value:e.checkModal,callback:function(t){e.checkModal=t},expression:"checkModal"}},[o("Form",{attrs:{model:e.detailForm,"label-width":120}},[o("Divider",{staticStyle:{color:"#909399","font-size":"13px"}},[e._v("基础配置")]),o("FormItem",{attrs:{label:"应用名:"}},[o("b",[e._v(e._s(e.detailForm.app_name))])]),o("FormItem",{attrs:{label:"环境:"}},[o("b",[e._v(e._s(e.detailForm.env))])]),o("FormItem",{attrs:{label:"(前/后) 端:"}},[o("b",[e._v(e._s(e.detailForm.web_tag))])]),o("FormItem",{attrs:{label:"发布IP:"}},[o("br"),o("ol",e._l(e.detailForm.publish_ip,function(t,r){return o("li",{key:r},[o("b",[e._v(e._s(t))])])}))]),o("FormItem",{attrs:{label:"Server Mode:"}},[o("b",[e._v(e._s(e.detailForm.server_mode))])]),o("FormItem",{attrs:{label:"Jenkins Project:"}},[o("b",[e._v(e._s(e.detailForm.jenkins_project))])]),o("FormItem",{attrs:{label:"Git Url:"}},[o("b",[e._v(e._s(e.detailForm.git_url))])]),o("FormItem",{attrs:{label:"部署步骤:"}},[o("b",{staticStyle:{color:"#909399"}},[e._v("模版："+e._s(e.detailForm.steps.name))]),o("br"),e.detailForm.steps.deploy_steps?o("b",[e._v(e._s(e.detailForm.steps.deploy_steps.join("  --\x3e  ")))]):e._e()]),o("FormItem",{attrs:{label:"回滚步骤:"}},[o("b",{staticStyle:{color:"#909399"}},[e._v("模版："+e._s(e.detailForm.steps.name))]),o("br"),e.detailForm.steps.rollback_steps?o("b",[e._v(e._s(e.detailForm.steps.rollback_steps.join("  --\x3e  ")))]):e._e()]),o("FormItem",{attrs:{label:"最后修改时间:"}},[o("b",[e._v(e._s(e.detailForm.updated))])]),"frontend"===e.currentWebTag?o("div",[o("Divider",{staticStyle:{color:"#909399","font-size":"13px"}},[e._v("参数配置 (前端)")]),o("h4",{staticStyle:{color:"#909399","text-align":"center"}},[e._v("None")])],1):e._e(),"backend"===e.currentWebTag?o("div",[o("Divider",{staticStyle:{color:"#909399","font-size":"13px"}},[e._v("参数配置 (后端)")]),o("FormItem",{attrs:{label:"Package Name:"}},[o("b",[e._v(e._s(e.detailForm.pkg_name))])]),o("FormItem",{attrs:{label:"App Port:"}},[o("b",[e._v(e._s(e.detailForm.port))])]),o("FormItem",{attrs:{label:"Mvn Options:"}},[o("b",{staticStyle:{color:"#909399"}},[e._v("模版："+e._s(e.detailForm.mvn_opts.name))]),o("br"),o("b",[e._v(e._s(e.detailForm.mvn_opts.mvn_opts))])]),o("FormItem",{attrs:{label:"Gradle Options:"}},[o("b",{staticStyle:{color:"#909399"}},[e._v("模版："+e._s(e.detailForm.gradle_opts.name))]),o("br"),o("b",[e._v(e._s(e.detailForm.gradle_opts.gradle_opts))])]),o("FormItem",{attrs:{label:"Java Options:"}},[o("b",{staticStyle:{color:"#909399"}},[e._v("模版："+e._s(e.detailForm.java_opts.name))]),o("br"),o("b",[e._v(e._s(e.detailForm.java_opts.java_opts))])]),o("FormItem",{attrs:{label:"Jar Options:"}},[o("b",{staticStyle:{color:"#909399"}},[e._v("模版："+e._s(e.detailForm.jar_opts.name))]),o("br"),o("b",[e._v(e._s(e.detailForm.jar_opts.jar_opts))])]),o("FormItem",{attrs:{label:"Dockerfile:"}},[o("b",{staticStyle:{color:"#909399"}},[e._v("模版："+e._s(e.detailForm.dockerfile.name))]),o("br"),o("Input",{staticStyle:{width:"100%"},attrs:{type:"textarea",readonly:"",rows:6,value:e.detailForm.dockerfile.dockerfile}})],1),o("FormItem",{attrs:{label:"Docker Options:"}},[o("b",{staticStyle:{color:"#909399"}},[e._v("模版："+e._s(e.detailForm.docker_opts.name))]),o("br"),o("b",[e._v(e._s(e.detailForm.docker_opts.docker_opts))])])],1):e._e()],1)],1),o("Modal",{attrs:{title:"批量更换IP",mask:!1},on:{"on-ok":function(t){e.handleChangeIpModal("changeIpForm")}},model:{value:e.changeIpModal,callback:function(t){e.changeIpModal=t},expression:"changeIpModal"}},[o("Alert",{attrs:{"show-icon":"",type:"warning"}},[e._v("若新的IP不存在于被修改的环境的机器中，则会出现异常显示等问题 (通常修改回有的IP即可)")]),o("Form",{ref:"changeIpForm",attrs:{model:e.changeIpForm,"label-width":100,rules:e.ruleChangeIpForm,inline:""}},[o("FormItem",{attrs:{label:"环境:",prop:"envs"}},[o("Select",{staticStyle:{width:"300px"},attrs:{multiple:""},model:{value:e.changeIpForm.envs,callback:function(t){e.$set(e.changeIpForm,"envs",t)},expression:"changeIpForm.envs"}},e._l(e.dynamicTabs,function(t){return o("Option",{key:t.id,attrs:{value:t.env}},[e._v(e._s(t.env))])}))],1),o("FormItem",{attrs:{label:"旧IP:",prop:"old_ip"}},[o("Select",{staticStyle:{width:"300px"},attrs:{filterable:""},model:{value:e.changeIpForm.old_ip,callback:function(t){e.$set(e.changeIpForm,"old_ip",t)},expression:"changeIpForm.old_ip"}},e._l(e.oldIps,function(t){return o("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],1),o("FormItem",{attrs:{label:"新IP:",prop:"new_ip"}},[o("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"new ip"},model:{value:e.changeIpForm.new_ip,callback:function(t){e.$set(e.changeIpForm,"new_ip","string"===typeof t?t.trim():t)},expression:"changeIpForm.new_ip"}})],1)],1)],1)],1)},a=[],n=(o("7f7f"),o("ac6a"),o("66df")),i=o("6821f"),s={pp:i("code_publish_config")},l=function(){return n["a"].request({url:"/api/v1/code-publish/web/env/",method:"get",headers:s})},c=function(e){return n["a"].request({url:"/api/v1/code-publish/web/env/",method:"post",data:e,headers:s})},p=function(e,t){return n["a"].request({url:"/api/v1/code-publish/web/env/".concat(e,"/"),method:"put",data:t,headers:s})},d=function(e){return n["a"].request({url:"/api/v1/code-publish/web/env/".concat(e,"/"),method:"delete",headers:s})},u=function(){return n["a"].request({url:"/api/v1/code-publish/get/main-conf/",method:"get",headers:s})},m=function(e){return n["a"].request({url:"/api/v1/code-publish/web/main-conf/".concat(e,"/"),method:"delete",headers:s})},h=function(e){return n["a"].request({url:"/api/v1/code-publish/web/main-conf/",method:"post",headers:s,data:e})},f=function(e,t){return n["a"].request({url:"/api/v1/code-publish/web/main-conf/".concat(e,"/"),method:"put",headers:s,data:t})},v=function(e){return n["a"].request({url:"/api/v1/code-publish/web/replace-ip/",method:"post",data:e,headers:s})},_=function(e,t){return n["a"].request({url:"/api/v1/code-publish/web/copy-conf/".concat(e,"/"),method:"put",data:t,headers:s})},g=function(e){return n["a"].request({url:"/api/v1/code-publish/web/batch/copy-config/",method:"post",data:e,headers:s})},b=function(){return n["a"].request({url:"/api/v1/code-publish/web/steps/",method:"get",headers:s})},F=function(){return n["a"].request({url:"/api/v1/code-publish/web/mvn-opts/",method:"get",headers:s})},y=function(){return n["a"].request({url:"/api/v1/code-publish/web/gradle-opts/",method:"get",headers:s})},k=function(){return n["a"].request({url:"/api/v1/code-publish/web/java-opts/",method:"get",headers:s})},w=function(){return n["a"].request({url:"/api/v1/code-publish/web/jar-opts/",method:"get",headers:s})},S=function(){return n["a"].request({url:"/api/v1/code-publish/web/docker-opts/",method:"get",headers:s})},I=function(){return n["a"].request({url:"/api/v1/code-publish/web/dockerfile/",method:"get",headers:s})},M=function(){return n["a"].request({url:"/api/v1/code-publish/web/control/app-detail/",method:"get",headers:s})},T=function(){return n["a"].request({url:"/api/v1/common/setting/code-publish/",method:"get",headers:s})},j=o("c276"),x={name:"code_publish_conf",computed:{dynamicTabs:function(){return this.tabs.filter(function(e){if("ALL"!==e.env)return e})}},data:function(){var e=this;return{commitLoading:!1,batchCopyAppShowList:[],batchCopyModal:!1,batchCopyForm:{env:"",app_ids:[]},currentSelectAppName:"",currentSelectEnv:"",appList:[],appDetail:{},currentTab:"ALL",tableSelectedIds:[],oldIps:[],changeIpModal:!1,searchApp:"",tableLoading:!1,currentCreateModal:"create",createModal:!1,createModalTitle:"",currentWebTag:"frontend",configFormSelect:{web_tag:["frontend","backend"],jenkins_project:[],server_mode:[],appEnvIp:[],mvn_opts:[],java_opts:[],jar_opts:[],docker_opts:[],dockerfile:[],steps:[],gradle_opts:[]},configForm:{app_name:"",env:"",web_tag:"",publish_ip:[],pkg_name:"",port:0,server_mode:"",git_url:"",jenkins_project:"",mvn_opts_id:0,java_opts_id:0,jar_opts_id:0,docker_opts_id:0,steps_id:0,dockerfile_id:0,gradle_opts_id:0},ruleBatchCopyForm:{env:[{required:!0,message:"必须填写",trigger:"change"}]},ruleConfigForm:{app_name:[{required:!0,message:"必须填写",trigger:"blur"}],web_tag:[{required:!0,message:"必须填写",trigger:"change"}],env:[{required:!0,message:"必须填写",trigger:"change"}],publish_ip:[{required:!0,message:"必须填写",trigger:"change",type:"array"}],server_mode:[{required:!0,message:"必须填写",trigger:"change"}],jenkins_project:[{required:!0,message:"必须填写",trigger:"change"}],git_url:[{required:!0,message:"必须填写",trigger:"blur"}],steps_id:[{required:!0,message:"必须填写"}]},checkModal:!1,checkModalTitle:"",copyModal:!1,copyModalTitle:"",detailForm:{app_name:"",web_tag:"",env:"",publish_ip:[],git_url:"",jenkins_project:"",updated:"",pkg_name:"",mvn_opts:{},java_opts:{},jar_opts:{},gradle_opts:{},docker_opts:{},steps:{deploy_steps:[],rollback_steps:[]},dockerfile:{}},changeIpForm:{envs:"",old_ip:"",new_ip:""},copyForm:{envs:[],id:""},envModal:!1,envModalTitle:"",envCurrentMode:"",envForm:{id:"",env:""},tabs:[{id:1,env:"ALL"}],ruleChangeIpForm:{envs:[{required:!0,message:"必须选择",trigger:"change",type:"array"}],old_ip:[{required:!0,message:"必须选择",trigger:"change"}],new_ip:[{required:!0,message:"必须填写",trigger:"blur"}]},ruleCopyForm:{envs:[{required:!0,message:"必须选择",trigger:"change",type:"array"}]},ruleEnvForm:{env:[{required:!0,message:"必须填写",trigger:"blur"}]},tableColumn:[{type:"selection",width:50,align:"center"},{title:"应用名",key:"app_name",width:150,tooltips:!0,sortable:!0},{title:"环境",key:"env",width:100,sortable:!0},{title:"发布IP",key:"publish_ip",width:150,render:function(e,t){var o=[];for(var r in t.row.publish_ip){var a=t.row.publish_ip[r];o.push(e("p",{},"".concat(a)))}return e("div",{},o)}},{title:"(前/后) 端",key:"web_tag",width:150,sortable:!0,render:function(e,t){var o;switch(t.row.web_tag){case"backend":o="volcano";break;case"frontend":o="green";break}return e("div",{},[e("Tag",{props:{color:o}},t.row.web_tag)])}},{title:"Jenkins Project",key:"jenkins_project",tooltips:!0},{title:"Server Mode",key:"server_mode",tooltips:!0,align:"center",sortable:!0},{title:"修改日期",align:"center",key:"updated",width:150,sortable:!0,sortType:"desc"},{title:"操作",align:"center",width:180,render:function(t,o){return t("div",{},[t("a",{style:{"margin-right":"10px"},on:{click:function(){e.checkModal=!0,e.checkModalTitle="查看".concat(o.row.env,"环境 ").concat(o.row.app_name," 信息配置"),e.detailForm=o.row,e.currentWebTag=o.row.web_tag}}},"详细信息"),t("a",{on:{click:function(){e.copyModal=!0,e.copyForm.id=o.row.id,e.copyModalTitle="复制 ".concat(o.row.app_name," 发布配置"),e.configForm.publish_ip=[]}}},"复制"),t("a",{style:{"margin-left":"10px"},on:{click:function(){try{e.handleUpdateModal();var t=o.row;console.log(e.appDetail),e.configFormSelect.appEnvIp=e.appDetail[t.app_name][t.env.toLowerCase()],e.configFormSelect.appEnvIp||(t.publish_ip=[]),e.configForm={id:t.id,app_name:t.app_name,env:t.env,publish_ip:t.publish_ip,pkg_name:t.pkg_name,server_mode:t.server_mode,git_url:t.git_url,jenkins_project:t.jenkins_project,mvn_opts_id:t.mvn_opts.id,java_opts_id:t.java_opts.id,jar_opts_id:t.jar_opts.id,gradle_opts_id:t.gradle_opts.id,docker_opts_id:t.docker_opts.id,steps_id:t.steps.id,dockerfile_id:t.dockerfile.id,web_tag:t.web_tag,port:t.port},e.currentSelectAppName=t.app_name,e.currentWebTag=t.web_tag}catch(r){Object(j["s"])("error","检查App管理中未允许 “发布”"),Object(j["s"])("error",r)}}}},"编辑")])}}],tableData:[],tmpTableData:[],originTableData:[]}},methods:{handleServerMode:function(e){var t=this;this.tableLoading=!0,"ALL"===this.currentTab?this.tableData=this.originTableData:this.tableData=this.originTableData.filter(function(e){if(e.env===t.currentTab)return e}),this.tableData=this.tableData.filter(function(t){if(t.server_mode===e)return t}),this.tableLoading=!1},handleCopyFormShow:function(){var e=this;this.batchCopyForm.app_ids=this.tableSelectedIds,0!==this.batchCopyForm.app_ids.length?(this.batchCopyAppShowList=[],this.batchCopyModal=!0,this.tableData.forEach(function(t){-1!==e.batchCopyForm.app_ids.indexOf(t.id)&&e.batchCopyAppShowList.push(t.app_name)})):this.$Message.error("请选择需要复制的APP。")},handleAppNameChange:function(e){e&&(this.currentSelectAppName=e,this.configForm.env="",this.configForm.publish_ip=[])},handleEnvChange:function(e){e&&(console.log(this.appDetail[this.currentSelectAppName]),this.configForm.publish_ip=[],this.configFormSelect.appEnvIp=this.appDetail[this.currentSelectAppName][e.toLowerCase()])},handleCreateModal:function(){this.createModal=!0,this.createModalTitle="创建发布配置",this.currentCreateModal="create",this.refreshVarietyArgs()},handleUpdateModal:function(){this.createModal=!0,this.createModalTitle="更新发布配置",this.currentCreateModal="update",this.refreshVarietyArgs()},handleReset:function(e){this.$refs[e].resetFields()},handlePublishConfig:function(e){var t=this;this.$refs[e].validate(function(e){e?(t.commitLoading=!0,"create"===t.currentCreateModal?(t.configForm.publish_ip=JSON.stringify(t.configForm.publish_ip),h(t.configForm).then(function(e){t.$Message.success("成功配置创建"),t.refresTabledata(),t.commitLoading=!1,t.createModal=!1}).catch(function(e){Object(j["s"])("error",e),t.commitLoading=!1,t.createModal=!1})):"update"===t.currentCreateModal&&(t.configForm.publish_ip=JSON.stringify(t.configForm.publish_ip),f(t.configForm.id,t.configForm).then(function(e){t.$Message.success("更新配置创建"),t.refreshChoseData(),t.commitLoading=!1,t.createModal=!1}).catch(function(e){Object(j["s"])("error",e),t.commitLoading=!1,t.createModal=!1}))):t.$Message.error("提交失败，不可缺少必要参数")})},refreshChoseData:function(){var e=this;this.tableLoading=!0,u().then(function(t){e.originTableData=t.data.reverse(),e.choseTab(e.currentTab),e.tableLoading=!1}).catch(function(t){Object(j["s"])("error",t),e.tableLoading=!1})},getOldIps:function(){var e=this;this.oldIps=[],this.originTableData.forEach(function(t){t.publish_ip&&t.publish_ip.forEach(function(t){-1===e.oldIps.indexOf(t)&&e.oldIps.push(t)})})},handleChangeIpModal:function(e){var t=this;this.$refs[e].validate(function(e){e?t.changeIpForm.envs.forEach(function(e){var o={env:e,old_ip:t.changeIpForm.old_ip,new_ip:t.changeIpForm.new_ip};v(o).then(function(e){t.$Message.success("切换IP成功")}).catch(function(e){Object(j["s"])("error",e)})}):t.$Message.error("请填写完整信息。")})},searchValue:function(){var e=this;this.tableLoading=!0,"ALL"===this.currentTab?this.tableData=this.originTableData:this.tableData=this.originTableData.filter(function(t){if(t.env===e.currentTab)return t}),0!==this.searchApp.length?(this.tableData=this.tableData.filter(function(t){if(t.app_name.indexOf(e.searchApp)>-1)return t}),this.tableLoading=!1):this.tableLoading=!1},deleteData:function(){var e=this;this.tableSelectedIds.forEach(function(t){m(t).then(function(o){e.$Message.success("删除Table ".concat(t)),e.refreshChoseData()}).catch(function(e){Object(j["s"])("error",e)})})},refresTabledata:function(){var e=this;this.tableLoading=!0,u().then(function(t){e.tableData=t.data,e.originTableData=t.data,e.tableLoading=!1}).catch(function(t){Object(j["s"])("error",t),e.tableLoading=!1})},handleCheckModal:function(){},handleBatchCopyForm:function(e){var t=this;this.$refs[e].validate(function(e){e?g(t.batchCopyForm).then(function(e){t.$Message.success("批量复制发布配置成功")}).catch(function(e){e.response.request.responseText.indexOf("Duplicate")>-1?Object(j["s"])("error","某配置已存在, 请确认后再添加"):Object(j["s"])("error",e)}):t.$Message.error("完整填写信息")})},handleCopyForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var o={envs:t.copyForm.envs};_(t.copyForm.id,o).then(function(e){t.$Message.success("复制发布配置成功")}).catch(function(e){e.response.request.responseText.indexOf("Duplicate")>-1?Object(j["s"])("error","配置已存在, 请确认后再添加"):Object(j["s"])("error",e)})}else t.$Message.error("完整填写信息")})},clearEnvForm:function(){this.envForm={id:"",env:""}},addEnv:function(){var e=this;"ALL"!==this.envForm.env.toUpperCase()?c(this.envForm).then(function(t){e.$Message.success("添加成功"),e.refreshTabs(),e.clearEnvForm()}).catch(function(e){Object(j["s"])("error",e)}):this.$Message.error("环境名不能为 ALL/all")},_updateEnv:function(){var e=this;"ALL"!==this.envForm.env.toUpperCase()?p(this.envForm.id,this.envForm).then(function(t){e.$Message.success("更新成功"),e.refreshTabs(),e.clearEnvForm()}).catch(function(e){Object(j["s"])("error",e)}):this.$Message.error("环境名不能为 ALL/all")},deleteEnv:function(){var e=this;"ALL"!==this.envForm.env.toUpperCase()?this.tabs.forEach(function(t){t.env===e.envForm.env&&d(t.id).then(function(t){e.$Message.success("删除成功"),e.refreshTabs(),e.clearEnvForm()}).catch(function(e){Object(j["s"])("error",e)})}):this.$Message.error("环境名不能为 ALL/all")},handleEnv:function(e){var t=this;this.$refs[e].validate(function(e){e?"add"===t.envCurrentMode?t.addEnv():"delete"===t.envCurrentMode?t.deleteEnv():"update"===t.envCurrentMode&&t._updateEnv():t.$Message.error("请填写完整信息")})},hadnleDropDown:function(e){console.log(e),"add_env"===e&&(this.envModal=!0,this.envModalTitle="增加 Env Tab",this.envCurrentMode="add"),"delete_env"===e&&(this.envModal=!0,this.envModalTitle="删除 Env Tab",this.envCurrentMode="delete"),"update_env"===e&&(this.envModal=!0,this.envModalTitle="更新 Env Tab",this.envCurrentMode="update")},handleTabRemove:function(e){var t=this,o={title:"Tab 操作提示",content:"是否删除Tab <".concat(e,">"),onOk:function(){t["tab"+e]=!1},onCancel:function(){t["tab"+e]=!0,t.mainTab=!1,t.mainTab=!0}};this.$Modal.confirm(o)},refreshTabs:function(){var e=this;l().then(function(t){e.tabs=t.data}).catch(function(e){Object(j["s"])("error",e)})},choseTab:function(e){if(this.tableLoading=!0,this.currentTab=e,"ALL"===e)return this.tableData=this.originTableData,void(this.tableLoading=!1);this.tableData=this.originTableData.filter(function(t){if(t.env===e)return t}),this.tableLoading=!1},refreshAppIp:function(){var e=this;this.appList=[],M().then(function(t){for(var o in t.data)e.appList.push(o);e.appDetail=t.data,console.log(e.appDetail)}).catch(function(e){Object(j["s"])("error",e)})},refreshVarietyArgs:function(){var e=this;F().then(function(t){e.configFormSelect.mvn_opts=t.data}).catch(function(e){Object(j["s"])("error",e)}),y().then(function(t){e.configFormSelect.gradle_opts=t.data}).catch(function(e){Object(j["s"])("error",e)}),k().then(function(t){e.configFormSelect.java_opts=t.data}).catch(function(e){Object(j["s"])("error",e)}),w().then(function(t){e.configFormSelect.jar_opts=t.data}).catch(function(e){Object(j["s"])("error",e)}),S().then(function(t){e.configFormSelect.docker_opts=t.data}).catch(function(e){Object(j["s"])("error",e)}),I().then(function(t){e.configFormSelect.dockerfile=t.data}).catch(function(e){Object(j["s"])("error",e)}),b().then(function(t){e.configFormSelect.steps=t.data}).catch(function(e){Object(j["s"])("error",e)}),T().then(function(t){e.configFormSelect.server_mode=t.data[0]["code_publish_setting"]["server_mode"],e.configFormSelect.jenkins_project=t.data[0]["code_publish_setting"]["jenkins_project"]}).catch(function(e){Object(j["s"])("error",e)})}},mounted:function(){this.refreshTabs(),this.refresTabledata(),this.refreshAppIp(),this.refreshVarietyArgs()}},C=x,O=(o("53c2"),o("2877")),D=Object(O["a"])(C,r,a,!1,null,"bc1cb724",null);D.options.__file="config.vue";t["default"]=D.exports},"9a63":function(e,t){var o={utf8:{stringToBytes:function(e){return o.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(o.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],o=0;o<e.length;o++)t.push(255&e.charCodeAt(o));return t},bytesToString:function(e){for(var t=[],o=0;o<e.length;o++)t.push(String.fromCharCode(e[o]));return t.join("")}}};e.exports=o},f2f5:function(e,t,o){}}]);