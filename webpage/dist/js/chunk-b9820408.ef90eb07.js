(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9820408"],{"00d87":function(t,e){(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&s.rotl(t,8)|4278255360&s.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=s.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],s=0,a=0;s<t.length;s++,a+=8)e[a>>>5]|=t[s]<<24-a%32;return e},wordsToBytes:function(t){for(var e=[],s=0;s<32*t.length;s+=8)e.push(t[s>>>5]>>>24-s%32&255);return e},bytesToHex:function(t){for(var e=[],s=0;s<t.length;s++)e.push((t[s]>>>4).toString(16)),e.push((15&t[s]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],s=0;s<t.length;s+=2)e.push(parseInt(t.substr(s,2),16));return e},bytesToBase64:function(t){for(var s=[],a=0;a<t.length;a+=3)for(var n=t[a]<<16|t[a+1]<<8|t[a+2],i=0;i<4;i++)8*a+6*i<=8*t.length?s.push(e.charAt(n>>>6*(3-i)&63)):s.push("=");return s.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var s=[],a=0,n=0;a<t.length;n=++a%4)0!=n&&s.push((e.indexOf(t.charAt(a-1))&Math.pow(2,-2*n+8)-1)<<2*n|e.indexOf(t.charAt(a))>>>6-2*n);return s}};t.exports=s})()},"0831":function(t,e,s){"use strict";var a=s("1551"),n=s.n(a);n.a},1551:function(t,e,s){},"257f":function(t,e,s){},"5cff":function(t,e,s){},"6821f":function(t,e,s){(function(){var e=s("00d87"),a=s("9a63").utf8,n=s("044b"),i=s("9a63").bin,r=function(t,s){t.constructor==String?t=s&&"binary"===s.encoding?i.stringToBytes(t):a.stringToBytes(t):n(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var o=e.bytesToWords(t),c=8*t.length,l=1732584193,m=-271733879,d=-1732584194,u=271733878,p=0;p<o.length;p++)o[p]=16711935&(o[p]<<8|o[p]>>>24)|4278255360&(o[p]<<24|o[p]>>>8);o[c>>>5]|=128<<c%32,o[14+(c+64>>>9<<4)]=c;var h=r._ff,g=r._gg,v=r._hh,_=r._ii;for(p=0;p<o.length;p+=16){var f=l,b=m,y=d,F=u;l=h(l,m,d,u,o[p+0],7,-680876936),u=h(u,l,m,d,o[p+1],12,-389564586),d=h(d,u,l,m,o[p+2],17,606105819),m=h(m,d,u,l,o[p+3],22,-1044525330),l=h(l,m,d,u,o[p+4],7,-176418897),u=h(u,l,m,d,o[p+5],12,1200080426),d=h(d,u,l,m,o[p+6],17,-1473231341),m=h(m,d,u,l,o[p+7],22,-45705983),l=h(l,m,d,u,o[p+8],7,1770035416),u=h(u,l,m,d,o[p+9],12,-1958414417),d=h(d,u,l,m,o[p+10],17,-42063),m=h(m,d,u,l,o[p+11],22,-1990404162),l=h(l,m,d,u,o[p+12],7,1804603682),u=h(u,l,m,d,o[p+13],12,-40341101),d=h(d,u,l,m,o[p+14],17,-1502002290),m=h(m,d,u,l,o[p+15],22,1236535329),l=g(l,m,d,u,o[p+1],5,-165796510),u=g(u,l,m,d,o[p+6],9,-1069501632),d=g(d,u,l,m,o[p+11],14,643717713),m=g(m,d,u,l,o[p+0],20,-373897302),l=g(l,m,d,u,o[p+5],5,-701558691),u=g(u,l,m,d,o[p+10],9,38016083),d=g(d,u,l,m,o[p+15],14,-660478335),m=g(m,d,u,l,o[p+4],20,-405537848),l=g(l,m,d,u,o[p+9],5,568446438),u=g(u,l,m,d,o[p+14],9,-1019803690),d=g(d,u,l,m,o[p+3],14,-187363961),m=g(m,d,u,l,o[p+8],20,1163531501),l=g(l,m,d,u,o[p+13],5,-1444681467),u=g(u,l,m,d,o[p+2],9,-51403784),d=g(d,u,l,m,o[p+7],14,1735328473),m=g(m,d,u,l,o[p+12],20,-1926607734),l=v(l,m,d,u,o[p+5],4,-378558),u=v(u,l,m,d,o[p+8],11,-2022574463),d=v(d,u,l,m,o[p+11],16,1839030562),m=v(m,d,u,l,o[p+14],23,-35309556),l=v(l,m,d,u,o[p+1],4,-1530992060),u=v(u,l,m,d,o[p+4],11,1272893353),d=v(d,u,l,m,o[p+7],16,-155497632),m=v(m,d,u,l,o[p+10],23,-1094730640),l=v(l,m,d,u,o[p+13],4,681279174),u=v(u,l,m,d,o[p+0],11,-358537222),d=v(d,u,l,m,o[p+3],16,-722521979),m=v(m,d,u,l,o[p+6],23,76029189),l=v(l,m,d,u,o[p+9],4,-640364487),u=v(u,l,m,d,o[p+12],11,-421815835),d=v(d,u,l,m,o[p+15],16,530742520),m=v(m,d,u,l,o[p+2],23,-995338651),l=_(l,m,d,u,o[p+0],6,-198630844),u=_(u,l,m,d,o[p+7],10,1126891415),d=_(d,u,l,m,o[p+14],15,-1416354905),m=_(m,d,u,l,o[p+5],21,-57434055),l=_(l,m,d,u,o[p+12],6,1700485571),u=_(u,l,m,d,o[p+3],10,-1894986606),d=_(d,u,l,m,o[p+10],15,-1051523),m=_(m,d,u,l,o[p+1],21,-2054922799),l=_(l,m,d,u,o[p+8],6,1873313359),u=_(u,l,m,d,o[p+15],10,-30611744),d=_(d,u,l,m,o[p+6],15,-1560198380),m=_(m,d,u,l,o[p+13],21,1309151649),l=_(l,m,d,u,o[p+4],6,-145523070),u=_(u,l,m,d,o[p+11],10,-1120210379),d=_(d,u,l,m,o[p+2],15,718787259),m=_(m,d,u,l,o[p+9],21,-343485551),l=l+f>>>0,m=m+b>>>0,d=d+y>>>0,u=u+F>>>0}return e.endian([l,m,d,u])};r._ff=function(t,e,s,a,n,i,r){var o=t+(e&s|~e&a)+(n>>>0)+r;return(o<<i|o>>>32-i)+e},r._gg=function(t,e,s,a,n,i,r){var o=t+(e&a|s&~a)+(n>>>0)+r;return(o<<i|o>>>32-i)+e},r._hh=function(t,e,s,a,n,i,r){var o=t+(e^s^a)+(n>>>0)+r;return(o<<i|o>>>32-i)+e},r._ii=function(t,e,s,a,n,i,r){var o=t+(s^(e|~a))+(n>>>0)+r;return(o<<i|o>>>32-i)+e},r._blocksize=16,r._digestsize=16,t.exports=function(t,s){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var a=e.wordsToBytes(r(t,s));return s&&s.asBytes?a:s&&s.asString?i.bytesToString(a):e.bytesToHex(a)}})()},7036:function(t,e,s){"use strict";var a=s("257f"),n=s.n(a);n.a},"768f":function(t,e,s){},9976:function(t,e,s){},"9a63":function(t,e){var s={utf8:{stringToBytes:function(t){return s.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(s.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],s=0;s<t.length;s++)e.push(255&t.charCodeAt(s));return e},bytesToString:function(t){for(var e=[],s=0;s<t.length;s++)e.push(String.fromCharCode(t[s]));return e.join("")}}};t.exports=s},a5f3:function(t,e,s){"use strict";var a=s("5cff"),n=s.n(a);n.a},a67a:function(t,e,s){"use strict";var a=s("cce7"),n=s.n(a);n.a},bbb8:function(t,e,s){"use strict";var a=s("9976"),n=s.n(a);n.a},bc9e:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Alert",{attrs:{"show-icon":"",closable:""}},[t._v("全站的所有设置都从这里可以找到...")]),s("Row",[s("Col",{attrs:{span:t.showMenu}},[s("Menu",{staticClass:"setting-container",attrs:{"active-name":"cmdbSetting",width:"210"},on:{"on-select":t.menuSelector}},[s("MenuGroup",{attrs:{title:"通用设置"}},[s("MenuItem",{attrs:{name:"baseSetting"}},[s("Icon",{attrs:{type:"ios-keypad"}}),s("span",{staticClass:"select-title"},[t._v("基础设置")])],1),s("MenuItem",{attrs:{name:"cmdbSetting"}},[s("Icon",{attrs:{type:"logo-buffer"}}),s("span",{staticClass:"select-title"},[t._v("CMDB设置")])],1),s("MenuItem",{attrs:{name:"appSetting"}},[s("Icon",{attrs:{type:"ios-appstore-outline"}}),s("span",{staticClass:"select-title"},[t._v("APP设置")])],1),s("MenuItem",{attrs:{name:"publishSetting"}},[s("Icon",{attrs:{type:"ios-code-working"}}),s("span",{staticClass:"select-title"},[t._v("代码发布设置")])],1),s("MenuItem",{attrs:{name:"messageSetting"}},[s("Icon",{attrs:{type:"ios-mail-open"}}),s("span",{staticClass:"select-title"},[t._v("消息设置")])],1)],1)],1)],1),s("Col",{attrs:{span:"showCard"}},[s("Card",{staticClass:"setting-container"},[s("a",{staticClass:"show-icon",on:{click:t.switchMenu}},[s("Icon",{attrs:{type:t.showIcon}})],1),s("MessageSetting",{directives:[{name:"show",rawName:"v-show",value:t.selectObj.messageSetting,expression:"selectObj.messageSetting"}]}),s("b",{directives:[{name:"show",rawName:"v-show",value:t.selectObj.baseSetting,expression:"selectObj.baseSetting"}]},[t._v("Coming soon...")]),s("CmdbSetting",{directives:[{name:"show",rawName:"v-show",value:t.selectObj.cmdbSetting,expression:"selectObj.cmdbSetting"}]}),s("AppSetting",{directives:[{name:"show",rawName:"v-show",value:t.selectObj.appSetting,expression:"selectObj.appSetting"}]}),s("PublishSetting",{directives:[{name:"show",rawName:"v-show",value:t.selectObj.publishSetting,expression:"selectObj.publishSetting"}]})],1)],1)],1)],1)},n=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Form",{ref:"messageForm",attrs:{model:t.messageForm,rules:t.ruleMessageForm,"label-width":150}},[s("Button",{staticStyle:{float:"right"},attrs:{type:"primary",ghost:""},on:{click:t.saveForm}},[t._v("保存")]),s("Divider",{attrs:{orientation:"left"}},[t._v(" "),s("span",{staticClass:"divider-text"},[t._v("站内消息")]),t._v(" ")]),s("FormItem",{attrs:{label:"启用站内消息:"}},[s("i-switch",{attrs:{value:t.messageForm.is_inner},on:{"on-change":t.isInnerSw}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1),s("Divider",{attrs:{orientation:"left"}},[t._v(" "),s("span",{staticClass:"divider-text"},[t._v("邮件消息")]),t._v(" ")]),s("FormItem",{attrs:{label:"启用邮件消息:"}},[s("i-switch",{attrs:{value:t.messageForm.is_mail},on:{"on-change":t.isMailSw}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1),s("FormItem",{attrs:{label:"SMTP 服务地址:",prop:"mail.smtp_host"}},[s("Input",{staticClass:"input-width",attrs:{placeholder:"smtp host"},model:{value:t.messageForm.mail.smtp_host,callback:function(e){t.$set(t.messageForm.mail,"smtp_host","string"===typeof e?e.trim():e)},expression:"messageForm.mail.smtp_host"}})],1),s("FormItem",{attrs:{label:"SMTP 端口:",prop:"mail.smtp_port"}},[s("InputNumber",{attrs:{max:65535,min:1},model:{value:t.messageForm.mail.smtp_port,callback:function(e){t.$set(t.messageForm.mail,"smtp_port",e)},expression:"messageForm.mail.smtp_port"}})],1),s("FormItem",{attrs:{label:"SMTP SSL:"}},[s("Checkbox",{model:{value:t.messageForm.mail.smtp_ssl,callback:function(e){t.$set(t.messageForm.mail,"smtp_ssl",e)},expression:"messageForm.mail.smtp_ssl"}},[t._v(" 启用")])],1),s("FormItem",{attrs:{label:"Mail 推送账户:",prop:"mail.mail_user"}},[s("Input",{staticClass:"input-width",attrs:{placeholder:"mail username"},model:{value:t.messageForm.mail.mail_user,callback:function(e){t.$set(t.messageForm.mail,"mail_user","string"===typeof e?e.trim():e)},expression:"messageForm.mail.mail_user"}})],1),s("FormItem",{attrs:{label:"Mail 账户密码:",prop:"mail.mail_password"}},[s("Input",{staticClass:"input-width",attrs:{type:"password",placeholder:"mail password"},model:{value:t.messageForm.mail.mail_password,callback:function(e){t.$set(t.messageForm.mail,"mail_password","string"===typeof e?e.trim():e)},expression:"messageForm.mail.mail_password"}})],1),s("FormItem",{attrs:{label:"Test 测试邮箱:"}},[s("Input",{staticClass:"input-width",staticStyle:{"margin-right":"10px"},attrs:{placeholder:"mail test"},model:{value:t.messageForm.mail.mail_test,callback:function(e){t.$set(t.messageForm.mail,"mail_test","string"===typeof e?e.trim():e)},expression:"messageForm.mail.mail_test"}}),s("Button",{attrs:{type:"primary",loading:t.mailLoading,size:"small"},on:{click:t.mailTest}},[t.mailLoading?s("span",[t._v("Loading")]):s("span",[t._v("Test")])])],1),s("FormItem",{attrs:{"label-width":50}}),s("Divider",{attrs:{orientation:"left"}},[t._v(" "),s("span",{staticStyle:{color:"#c5c8ce"}},[t._v("Other")]),t._v(" ")])],1)],1)},r=[],o=s("66df"),c=s("6821f"),l={pp:c("setting_commonSetting")},m=function(){return o["a"].request({url:"/api/v1/common/setting/message/",method:"get",headers:l})},d=function(t){var e="global";return o["a"].request({url:"/api/v1/common/setting/message/".concat(e,"/"),method:"put",data:t,headers:l})},u=function(t,e){return o["a"].request({url:"/api/v1/common/setting/message/test/".concat(t,"/"),method:"put",data:e,headers:l})},p=function(){return o["a"].request({url:"/api/v1/common/setting/cmdb/",method:"get",headers:l})},h=function(t){var e="global";return o["a"].request({url:"/api/v1/common/setting/cmdb/".concat(e,"/"),method:"put",data:t,headers:l})},g=function(){return o["a"].request({url:"/api/v1/common/setting/app/",method:"get",headers:l})},v=function(t){var e="global";return o["a"].request({url:"/api/v1/common/setting/app/".concat(e,"/"),method:"put",data:t,headers:l})},_=function(){return o["a"].request({url:"/api/v1/cmdb/aliyun/keys/",method:"get",headers:l})},f=function(t){return o["a"].request({url:"/api/v1/cmdb/aliyun/keys/",method:"post",data:t,headers:l})},b=function(t){return o["a"].request({url:"/api/v1/cmdb/aliyun/keys/".concat(t,"/"),method:"delete",headers:l})},y=function(t,e){return o["a"].request({url:"/api/v1/cmdb/aliyun/keys/".concat(t,"/"),method:"put",data:e,headers:l})},F=function(){return o["a"].request({url:"/api/v1/common/setting/ssh-proxy/",method:"get",headers:l})},x=function(t){return o["a"].request({url:"/api/v1/common/setting/ssh-proxy/",method:"post",headers:l,data:{proxy_idc:t}})},k=function(){return o["a"].request({url:"/api/v1/common/setting/code-publish/",method:"get",headers:l})},w=function(t){return o["a"].request({url:"/api/v1/common/setting/code-publish/global/",method:"put",headers:l,data:t})},S=s("c276"),I={name:"message_setting",data:function(){return{switch1:!0,mailLoading:!1,messageForm:{is_inner:!1,is_mail:!1,mail:{smtp_host:"",smtp_port:1,smtp_ssl:!1,mail_user:"",mail_password:"",mail_test:""}},ruleMessageForm:{"mail.smtp_host":[{required:!0,message:"Can not be empty.",trigger:"blur"}],"mail.mail_user":[{required:!0,message:"Can not be empty.",trigger:"blur"}],"mail.mail_password":[{required:!0,message:"Can not be empty.",trigger:"blur"}],"mail.smtp_port":[{required:!0}]}}},methods:{isInnerSw:function(t){this.messageForm.is_inner=t},isMailSw:function(t){this.messageForm.is_mail=t},mailTest:function(){var t=this;0!==this.messageForm.mail.mail_test.length?(this.mailLoading=!0,this.saveForm(),setTimeout(function(){u("mail",{mail_test:t.messageForm.mail.mail_test}).then(function(e){t.$Message.success("测试邮件已发送，请注意查收"),t.mailLoading=!1}).catch(function(e){Object(S["s"])("error",e),t.mailLoading=!1})},1500)):this.$Message.error("测试邮件不能为空.")},saveForm:function(){var t=this,e={is_mail:this.messageForm.is_mail,is_inner:this.messageForm.is_inner,message_setting:JSON.stringify({mail:this.messageForm.mail})};d(e).then(function(e){t.$Message.success("保存成功")}).catch(function(t){Object(S["s"])("error",t)})}},mounted:function(){var t=this;m().then(function(e){t.messageForm.mail=e.data[0]["message_setting"]["mail"],t.messageForm.is_inner=e.data[0]["is_inner"],t.messageForm["is_mail"]=e.data[0]["is_mail"]}).catch(function(t){Object(S["s"])("error",t)})}},C=I,M=(s("c790"),s("2877")),A=Object(M["a"])(C,i,r,!1,null,"050905aa",null);A.options.__file="message_setting.vue";var j=A.exports,D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Row",[s("Col",{attrs:{span:"24"}},[s("Tabs",{attrs:{type:"card",size:"small",value:t.tabName},on:{"on-click":t.addParams}},[s("TabPane",{attrs:{label:"通用",name:"common"}},[s("CmdbSettingCommon")],1),s("TabPane",{attrs:{label:"阿里云",icon:"ios-cloudy-outline",name:"aliyun"}},[s("CmdbSettingAliyun")],1),s("TabPane",{attrs:{label:"腾讯云",icon:"ios-cloudy-outline",name:"tencent",disabled:""}},[t._v("Comming soon...")]),s("TabPane",{attrs:{label:"UCloud",icon:"ios-cloudy-outline",name:"ucloud",disabled:""}},[t._v("Comming soon ...")]),s("TabPane",{attrs:{label:"AWS",icon:"ios-cloudy-outline",name:"aws",disabled:""}},[t._v("Comming soon ...")])],1)],1)],1)],1)},O=[],L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Alert",{attrs:{"show-icon":"",type:"warning"}},[t._v("已被设置的属性被删除后，关联的Host不会改变其已设置的属性，需重新修改")]),t.showAlert?t._e():s("span",[s("a",{staticStyle:{"font-size":"12px"},on:{click:function(e){t.showAlert=!0}}},[t._v("HELP")]),s("Icon",{staticStyle:{color:"#2D8cF0","margin-left":"3px"},attrs:{type:"ios-help-circle-outline"}})],1),t.showAlert?s("Alert",{attrs:{type:"warning",closable:""},on:{"on-close":function(e){t.showAlert=!1}}},[s("span",{attrs:{slot:"desc"},slot:"desc"},[s("b",[t._v("IDC设置: ")]),t._v("设置后可在cmdb中的idc选择资源归属的机房；"),s("br"),s("b",[t._v("环境设置: ")]),t._v("设置后可在cmdb中的环境选择资源归属的环境；\n    ")])]):t._e(),s("Divider",{attrs:{orientation:"left"}},[s("span",{staticClass:"divider-text"},[t._v("IDC 设置")])]),s("div",{staticClass:"content-text"},[t._l(t.idcList,function(e){return s("Tag",{key:e,attrs:{type:"border",color:"cyan",name:e,closable:""},on:{"on-close":t.idcClose}},[t._v(t._s(e))])}),s("div",{staticStyle:{"margin-top":"10px"}},[s("Input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"机房名"},model:{value:t.idcName,callback:function(e){t.idcName="string"===typeof e?e.trim():e},expression:"idcName"}}),s("Button",{attrs:{icon:"ios-add",type:"dashed",size:"small"},on:{click:t.idcAdd}},[t._v("添加机房")])],1)],2),s("Divider",{attrs:{orientation:"left"}},[s("span",{staticClass:"divider-text"},[t._v("环境设置")])]),s("div",{staticClass:"content-text"},[t._l(t.envList,function(e){return s("Tag",{key:e,attrs:{type:"border",color:"cyan",name:e,closable:""},on:{"on-close":t.envClose}},[t._v(t._s(e))])}),s("div",{staticStyle:{"margin-top":"10px"}},[s("Input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"环境名"},model:{value:t.envName,callback:function(e){t.envName="string"===typeof e?e.trim():e},expression:"envName"}}),s("Button",{attrs:{icon:"ios-add",type:"dashed",size:"small"},on:{click:t.envAdd}},[t._v("添加环境")])],1)],2),s("Divider",{attrs:{orientation:"left"}},[s("span",{staticClass:"divider-text"},[t._v("SSH PROXY")])]),s("div",{staticClass:"content-text"},[s("Select",{staticStyle:{width:"200px"},attrs:{multiple:""},model:{value:t.proxyIdc,callback:function(e){t.proxyIdc=e},expression:"proxyIdc"}},t._l(t.idcObj,function(e,a){return s("Option",{key:a,attrs:{value:a}},[t._v(t._s(a))])})),s("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"default",loading:t.sshProxyloading,size:"small"},on:{click:t.renderSshProxy}},[t.sshProxyloading?s("span",[t._v("Loading...")]):s("span",[t._v("渲染ssh proxy")])])],1),s("Divider",{attrs:{orientation:"left"}},[t._v(" "),s("span",{staticStyle:{color:"#c5c8ce"}},[t._v("Other")]),t._v(" ")])],1)},T=[],$={name:"cmdb_setting_common",data:function(){return{orginData:"",showAlert:!1,idcName:"",envName:"",idcList:[],envList:[],idcObj:{aliyun:"AliyunEcs",native:"NativeHost"},proxyIdc:[],sshProxyloading:!1}},methods:{renderSshProxy:function(){var t=this;0!==this.proxyIdc.length?(this.sshProxyloading=!0,x(JSON.stringify(this.proxyIdc)).then(function(e){t.$Message.success("操作成功"),t.sshProxyloading=!1}).catch(function(e){Object(S["s"])("error",e),t.sshProxyloading=!1})):this.$Message.error("ssh proxy 不允许为空.")},handleIdc:function(){var t=this;this.orginData["base"]["idc"]=this.idcList;var e={cmdb_setting:JSON.stringify(this.orginData)};console.log(e),h(e).then(function(e){t.$Message.success("操作成功")}).catch(function(t){Object(S["s"])("error",t)})},handleEnv:function(){var t=this;this.orginData["base"]["env"]=this.envList;var e={cmdb_setting:JSON.stringify(this.orginData)};h(e).then(function(e){t.$Message.success("操作成功")}).catch(function(t){Object(S["s"])("error",t)})},idcAdd:function(){this.idcList.push(this.idcName),this.handleIdc(),this.idcName=""},envAdd:function(){this.envList.push(this.envName),this.handleEnv(),this.envName=""},idcClose:function(t,e){var s=this.idcList.indexOf(e);this.idcList.splice(s,1),this.handleIdc()},envClose:function(t,e){var s=this.envList.indexOf(e);this.envList.splice(s,1),this.handleEnv()}},mounted:function(){var t=this;p().then(function(e){t.orginData=e.data[0]["cmdb_setting"],t.idcList=e.data[0]["cmdb_setting"]["base"]["idc"],t.envList=e.data[0]["cmdb_setting"]["base"]["env"]}).catch(function(t){Object(S["s"])("error",t)}),F().then(function(e){t.idcObj=e.data}).catch(function(t){Object(S["s"])("error",t)})}},P=$,N=(s("0831"),Object(M["a"])(P,L,T,!1,null,"15dca7a6",null));N.options.__file="common.vue";var q=N.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.showAlert?t._e():s("span",[s("a",{staticStyle:{"font-size":"12px"},on:{click:function(e){t.showAlert=!0}}},[t._v("HELP")]),s("Icon",{staticStyle:{color:"#2D8cF0","margin-left":"3px"},attrs:{type:"ios-help-circle-outline"}})],1),t.showAlert?s("Alert",{attrs:{type:"warning",closable:""},on:{"on-close":function(e){t.showAlert=!1}}},[s("span",{attrs:{slot:"desc"},slot:"desc"},[s("b",[t._v("Key Name: ")]),t._v("设置后用于对ECS等阿里云资产做分类（类似于机房）"),s("br")])]):t._e(),s("Divider",{attrs:{orientation:"left"}},[s("span",{staticClass:"divider-text"},[t._v("Access Key 设置")])]),s("div",{staticStyle:{"margin-left":"20px"}},[s("Form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.ruleDataForm,inline:""}},[s("FormItem",{attrs:{label:"",prop:"key_name"}},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"Key Name"},model:{value:t.dataForm.key_name,callback:function(e){t.$set(t.dataForm,"key_name",e)},expression:"dataForm.key_name"}})],1),s("FormItem",{attrs:{label:"",prop:"access_key"}},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"Access Key"},model:{value:t.dataForm.access_key,callback:function(e){t.$set(t.dataForm,"access_key",e)},expression:"dataForm.access_key"}})],1),s("FormItem",{attrs:{label:"",prop:"access_secret"}},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"Access Secret"},model:{value:t.dataForm.access_secret,callback:function(e){t.$set(t.dataForm,"access_secret",e)},expression:"dataForm.access_secret"}})],1),s("FormItem",{attrs:{label:"",prop:"region_id"}},[s("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"Region Id"},model:{value:t.dataForm.region_id,callback:function(e){t.$set(t.dataForm,"region_id",e)},expression:"dataForm.region_id"}})],1),s("FormItem",[s("Button",{attrs:{type:"primary",ghost:""},on:{click:function(e){t.addAccessKey("dataForm")}}},[t._v("添加")])],1)],1),s("Table",{attrs:{columns:t.tableColumns,data:t.tableDatas}})],1),s("Modal",{attrs:{title:"修改 Access Key"},on:{"on-ok":function(e){t.keyModalOk("mDataFrom")}},model:{value:t.keyModal,callback:function(e){t.keyModal=e},expression:"keyModal"}},[s("Form",{ref:"mDataFrom",attrs:{model:t.mDataForm,rules:t.ruleDataForm,"label-width":110}},[s("FormItem",{attrs:{label:"Key Name:"}},[s("Tag",{attrs:{color:"blue"}},[t._v(t._s(t.mDataForm.key_name))])],1),s("FormItem",{attrs:{prop:"access_key",label:"Access Key:"}},[s("Input",{attrs:{placeholder:"access key"},model:{value:t.mDataForm.access_key,callback:function(e){t.$set(t.mDataForm,"access_key",e)},expression:"mDataForm.access_key"}})],1),s("FormItem",{attrs:{prop:"access_secret",label:"Access Secret:"}},[s("Input",{attrs:{placeholder:"access secret"},model:{value:t.mDataForm.access_secret,callback:function(e){t.$set(t.mDataForm,"access_secret",e)},expression:"mDataForm.access_secret"}})],1),s("FormItem",{attrs:{prop:"region_id",label:"Region Id:"}},[s("Input",{attrs:{placeholder:"region id"},model:{value:t.mDataForm.region_id,callback:function(e){t.$set(t.mDataForm,"region_id",e)},expression:"mDataForm.region_id"}})],1)],1)],1)],1)},E=[],J=(s("7f7f"),{name:"cmdb_setting_aliyun",data:function(){var t=this;return{showAlert:!1,keyModal:!1,dataForm:{},mDataForm:{},ruleDataForm:{key_name:[{required:!0,message:"Cannot be empty.",trigger:"blur"}],access_key:[{required:!0,message:"Cannot be empty.",trigger:"blur"}],access_secret:[{required:!0,message:"Cannot be empty.",trigger:"blur"}],region_id:[{required:!0,message:"Cannot be empty.",trigger:"blur"}]},tableColumns:[{title:"Key Name",key:"key_name"},{title:"Access Key",key:"access_key"},{title:"Region ID",key:"region_id"},{title:"Update Time",key:"updated",align:"center"},{title:"Action",key:"action",align:"center",render:function(e,s){return console.log(s.row),e("span",{},[e("a",{style:{"margin-right":"20px"},on:{click:function(){t.mDataForm={id:s.row["id"],key_name:s.row["key_name"],access_key:s.row["access_key"],access_secret:"",region_id:s.row["region_id"]},t.keyModal=!0}}},"修改"),e("Poptip",{props:{confirm:!0,title:"Are you sure ?",placement:"left-end"},on:{"on-ok":function(){b(s.row.id).then(function(e){t.$Message.success("删除成功"),t.reloadTable()}).catch(function(t){Object(S["s"])("error",t)})}}},[e("a",{style:{color:"#c5c8ce"}},"删除")])])}}],tableDatas:[]}},methods:{keyModalOk:function(t){var e=this;this.$refs[t].validate(function(t){console.log(t),t?y(e.mDataForm.id,e.mDataForm).then(function(t){e.$Message.success("修改成功"),e.reloadTable()}).catch(function(t){Object(S["s"])("error",t)}):e.$Message.error("修改失败!")})},addAccessKey:function(t){var e=this;this.$refs[t].validate(function(t){t?f(e.dataForm).then(function(t){e.$Message.success("添加成功"),e.reloadTable()}).catch(function(t){t.response.data["key_name"]&&(t=t.response.data["key_name"][0]),Object(S["s"])("error",t)}):e.$Message.error("修改失败!")})},reloadTable:function(){var t=this;_().then(function(e){t.tableDatas=e.data}).catch(function(t){Object(S["s"])("error",t)})}},mounted:function(){this.reloadTable()}}),z=J,U=(s("7036"),Object(M["a"])(z,B,E,!1,null,null,null));U.options.__file="aliyun.vue";var R=U.exports,K={name:"cmdb_setting",data:function(){return{tabName:"common"}},components:{CmdbSettingCommon:q,CmdbSettingAliyun:R},methods:{addParams:function(t){console.log(this.$route.query),this.$router.push({name:"setting_setting",query:{tab:t}})}},mounted:function(){this.$route.query.tab&&(this.tabName=this.$route.query.tab)}},H=K,G=(s("a5f3"),Object(M["a"])(H,D,O,!1,null,null,null));G.options.__file="cmdb_setting.vue";var W=G.exports,X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Divider",{attrs:{orientation:"left"}},[t._v(" "),s("span",{staticClass:"divider-text"},[t._v("服务选项设置")]),t._v(" ")]),s("Alert",{attrs:{"show-icon":"",type:"warning"}},[t._v("已被选择的属性被删除，关联的App不会改变其已设置的属性，需重新修改；(docker 选项用于docker监控)")]),s("p",{staticStyle:{color:"#2d8cf0","line-height":"15px","margin-top":"5px","font-size":"12px"}},[t._v("\n    * 如 docker, k8s, tomcat, java, nginx, php, mysql, redis, kafka, python\n  ")]),t._l(t.serviceList,function(e){return s("Tag",{key:e,attrs:{type:"border",color:"cyan",name:e,closable:""},on:{"on-close":t.serviceClose}},[t._v(t._s(e))])}),s("div",{staticStyle:{"margin-top":"10px"}},[s("Input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"服务名"},model:{value:t.serviceName,callback:function(e){t.serviceName="string"===typeof e?e.trim():e},expression:"serviceName"}}),s("Button",{attrs:{icon:"ios-add",type:"dashed",size:"small"},on:{click:t.serviceAdd}},[t._v("服务选项添加")])],1),s("Divider",{attrs:{orientation:"left"}},[t._v(" "),s("span",{staticClass:"divider-text"},[t._v("环境监控Urlooker Agent设置")]),t._v(" ")]),s("Alert",{attrs:{"show-icon":"",type:"warning"}},[t._v("为每个环境设置，其对应的agent; "),s("br"),t._v("\n    * "),s("b",[t._v("default")]),t._v(" 为线上的agent, 部署在 service-test01-172-30-2-1.pre-release.ayg; "),s("br"),t._v("\n    * "),s("b",[t._v("internal.ayg.gz")]),t._v(" 为线下机房的agent，部署在 basic-ops-192-168-1-158.internal.ayg"),s("br"),t._v("\n    * 进程名："),s("b",[t._v("urlooker-agent")])]),s("div",{staticStyle:{"margin-bottom":"10px"}},t._l(t.envMonitorAgentDict,function(e,a){return s("Tag",{key:a,attrs:{color:"cyan",type:"border"}},[t._v("\n      "+t._s(a)+": "+t._s(e)+"\n    ")])})),s("Form",{attrs:{model:t.appMonitorAgentForm,inline:""}},[s("FormItem",[s("Select",{staticStyle:{width:"200px"},attrs:{filter:"",placeholder:"Associate Env"},model:{value:t.appMonitorAgentForm.env,callback:function(e){t.$set(t.appMonitorAgentForm,"env",e)},expression:"appMonitorAgentForm.env"}},t._l(t.envList,function(e){return s("Option",{key:e,attrs:{value:e}},[t._v("\n          "+t._s(e)+"\n        ")])}))],1),s("FormItem",[s("Select",{staticStyle:{width:"200px"},attrs:{filter:"",placeholder:"Monitor Agent"},model:{value:t.appMonitorAgentForm.agent,callback:function(e){t.$set(t.appMonitorAgentForm,"agent",e)},expression:"appMonitorAgentForm.agent"}},t._l(t.agentList,function(e){return s("Option",{key:e,attrs:{value:e}},[t._v("\n          "+t._s(e)+"\n        ")])}))],1),s("FormItem",[s("Button",{attrs:{type:"primary",ghost:""},on:{click:t.handleAddEnvMonitorAgent}},[t._v("添加")])],1)],1),s("Divider",{attrs:{orientation:"left"}},[t._v(" "),s("span",{staticStyle:{color:"#c5c8ce"}},[t._v("Other")]),t._v(" ")])],2)},Y=[],Z={name:"app_setting",data:function(){return{envMonitorAgentDict:{},envList:[],agentList:["default","internal.ayg.gz"],orginData:{},serviceList:[],serviceName:"",appMonitorAgentForm:{env:"",agent:""}}},methods:{handleAddEnvMonitorAgent:function(){this.envMonitorAgentDict[this.appMonitorAgentForm.env]=this.appMonitorAgentForm.agent,this.handleService(),this.appMonitorAgentForm={env:"",agent:""}},handleService:function(){var t=this;this.orginData["service"]=this.serviceList,this.orginData["env_monitor_agent"]=this.envMonitorAgentDict;var e={app_setting:JSON.stringify(this.orginData)};v(e).then(function(e){t.$Message.success("操作成功")})},serviceAdd:function(){this.serviceList.push(this.serviceName),this.handleService(),this.serviceName=""},serviceClose:function(t,e){var s=this.serviceList.indexOf(e);this.serviceList.splice(s,1),this.handleService()}},mounted:function(){var t=this;g().then(function(e){t.orginData=e.data[0]["app_setting"],t.serviceList=e.data[0]["app_setting"]["service"],t.envMonitorAgentDict=e.data[0]["app_setting"]["env_monitor_agent"]}),p().then(function(e){t.envList=e.data[0]["cmdb_setting"]["base"]["env"],t.envList=t.envList.filter(function(t){if("external"!==t&&"undefined"!==t)return t})}).catch(function(t){sendNotice("error",t)})}},Q=Z,V=(s("bbb8"),Object(M["a"])(Q,X,Y,!1,null,"7df6ea98",null));V.options.__file="app_setting.vue";var tt=V.exports,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Alert",{attrs:{"show-icon":"",type:"warning"}},[t._v("这里的设置用于代码发布配置，各类固定选项的设置")]),s("Divider",{attrs:{orientation:"left"}},[t._v(" "),s("span",{staticClass:"divider-text"},[t._v("Git Auth 设置")]),t._v(" ")]),s("Form",{attrs:{inline:""}},[s("FormItem",{attrs:{label:"Git Username:","label-width":100}},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"Git Username"},model:{value:t.dataForm.git_info.username,callback:function(e){t.$set(t.dataForm.git_info,"username","string"===typeof e?e.trim():e)},expression:"dataForm.git_info.username"}})],1),s("FormItem",{attrs:{label:"Git Password:","label-width":100}},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"Git Password"},model:{value:t.dataForm.git_info.password,callback:function(e){t.$set(t.dataForm.git_info,"password","string"===typeof e?e.trim():e)},expression:"dataForm.git_info.password"}})],1),s("FormItem",[s("Button",{attrs:{type:"primary",ghost:"",size:"small"},on:{click:t.handleUpdateCodePublish}},[t._v("Save")])],1)],1),s("Divider",{attrs:{orientation:"left"}},[t._v(" "),s("span",{staticClass:"divider-text"},[t._v("Server Mode 设置")]),t._v(" ")]),t._l(t.serverModeList,function(e){return s("Tag",{key:e,attrs:{name:e,closable:"",color:"cyan",type:"border"},on:{"on-close":t.handleRemoveServerMode}},[t._v(t._s(e))])}),s("br"),s("div",{staticStyle:{"margin-top":"10px"}},[s("Input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:""},model:{value:t.dataForm.server_mode,callback:function(e){t.$set(t.dataForm,"server_mode","string"===typeof e?e.trim():e)},expression:"dataForm.server_mode"}}),s("Button",{attrs:{icon:"ios-add",type:"dashed",size:"small"},on:{click:function(){t.serverModeList.push(t.dataForm.server_mode),t.handleUpdateCodePublish()}}},[t._v("添加 server mode")])],1),s("Divider",{attrs:{orientation:"left"}},[t._v(" "),s("span",{staticClass:"divider-text"},[t._v("Jenkins Project 设置")]),t._v(" ")]),t._l(t.JenkinsProject,function(e){return s("Tag",{key:e,attrs:{name:e,closable:"",color:"cyan",type:"border"},on:{"on-close":t.handleRemoveJenkinsProject}},[t._v(t._s(e))])}),s("div",{staticStyle:{"margin-top":"10px"}},[s("Input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:""},model:{value:t.dataForm.jenkins_project,callback:function(e){t.$set(t.dataForm,"jenkins_project","string"===typeof e?e.trim():e)},expression:"dataForm.jenkins_project"}}),s("Button",{attrs:{icon:"ios-add",type:"dashed",size:"small"},on:{click:function(){t.JenkinsProject.push(t.dataForm.jenkins_project),t.handleUpdateCodePublish()}}},[t._v("添加 jenkins project")])],1),s("Divider",{attrs:{orientation:"left"}},[t._v(" "),s("span",{staticClass:"divider-text"},[t._v("发布记录删除x天前数据")]),t._v(" ")]),s("Form",{attrs:{inline:""}},[s("FormItem",{attrs:{label:"删除x天前:","label-width":100}},[s("InputNumber",{staticStyle:{width:"200px"},attrs:{min:1,max:30,placeholder:"min=1d，max30d"},model:{value:t.dataForm.delete_expire_days,callback:function(e){t.$set(t.dataForm,"delete_expire_days",e)},expression:"dataForm.delete_expire_days"}})],1),s("FormItem",[s("Button",{attrs:{type:"primary",ghost:"",size:"small"},on:{click:t.handleUpdateCodePublish}},[t._v("Save")])],1)],1)],2)},st=[],at={name:"publish_setting",data:function(){return{dataForm:{server_mode:"",jenkins_project:"",git_info:{username:"",password:""},delete_expire_days:3},serverModeList:[],JenkinsProject:[]}},methods:{refreshData:function(){var t=this;k().then(function(e){t.serverModeList=e.data[0]["code_publish_setting"]["server_mode"],t.JenkinsProject=e.data[0]["code_publish_setting"]["jenkins_project"],t.dataForm.git_info.username=e.data[0]["code_publish_setting"]["git_info"]["username"],t.dataForm.git_info.password=e.data[0]["code_publish_setting"]["git_info"]["password"],t.dataForm.delete_expire_days=e.data[0]["code_publish_setting"]["delete_expire_days"]}).catch(function(t){Object(S["s"])("error",t)})},handleRemoveServerMode:function(t,e){this.serverModeList=this.serverModeList.filter(function(t){if(t!==e)return t}),this.handleUpdateCodePublish()},handleRemoveJenkinsProject:function(t,e){this.JenkinsProject=this.JenkinsProject.filter(function(t){if(t!==e)return t}),this.handleUpdateCodePublish()},handleUpdateCodePublish:function(){var t=this,e={server_mode:this.serverModeList,jenkins_project:this.JenkinsProject,git_info:{username:this.dataForm.git_info.username,password:this.dataForm.git_info.password},delete_expire_days:this.dataForm.delete_expire_days};w({code_publish_setting:JSON.stringify(e)}).then(function(e){t.$Message.success("操作成功"),t.dataForm.server_mode="",t.dataForm.jenkins_project=""}).catch(function(t){Object(S["s"])("error",t)})}},mounted:function(){this.refreshData()}},nt=at,it=Object(M["a"])(nt,et,st,!1,null,null,null);it.options.__file="publish_setting.vue";var rt=it.exports,ot={name:"setting_setting",data:function(){return{showMenu:"4",showCard:"20",showIcon:"ios-arrow-dropleft-circle",selectObj:{messageSetting:!1,baseSetting:!1,cmdbSetting:!0,appSetting:!1,publishSetting:!1}}},components:{MessageSetting:j,CmdbSetting:W,AppSetting:tt,PublishSetting:rt},methods:{switchMenu:function(){"0"===this.showMenu?(this.showMenu="4",this.showCard="20",this.showIcon="ios-arrow-dropleft-circle"):(this.showMenu="0",this.showCard="24",this.showIcon="ios-arrow-dropright-circle")},menuSelector:function(t){for(var e in this.selectObj)this.selectObj[e]=e===t}}},ct=ot,lt=(s("a67a"),Object(M["a"])(ct,a,n,!1,null,"f6c54b16",null));lt.options.__file="common_setting.vue";e["default"]=lt.exports},c790:function(t,e,s){"use strict";var a=s("768f"),n=s.n(a);n.a},cce7:function(t,e,s){}}]);